extends header

block content
    h1 Project: #{project.name}

    a.button(href="") Log Time

    if(person == project.owner)
        p You are the owner of this project.
        if(project.categories().isEmpty())
            p
                | You don't have created any categories yet. Come on and create some
                a(href="/projects/#{project.id}/categories/create")  here.
        else
            h2 Logged Time:
            div#piechart
            script(type="text/javascript" src="https://www.gstatic.com/charts/loader.js")
            script(type="text/javascript").
                var categories =!{categorieNames};
                //var members = !{members};

                // Load google charts
                google.charts.load('current', {'packages': ['corechart']});
                google.charts.setOnLoadCallback(drawChart);

                // Draw the chart and set the chart values
                function drawChart() {
                    var data = new google.visualization.DataTable();
                    categories.forEach(c => data.addColumn('string', c))    ;

                    // Optional; add a title and set the width and height of the chart
                    var options = {'title': 'Worked on', 'width': 400, 'height': 300};

                    // Display the chart inside the <div> element with id="piechart"
                    var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                    chart.draw(data, options);
                }
    else
        h2 Owner:
            p #{project.owner.getFullName()}

    h2 Members:
    if project.members.length > 1
        ul
        each member in projects.members()
            li #{member.getFullName()}
    else
        p There are no members
