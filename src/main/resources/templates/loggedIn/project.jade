extends header

block content
    h1 Project: #{project.name}

    a.button(href="/projects/#{project.id}/logtime") Log Time

    if(person == project.owner)
        p You are the owner of this project.
        if(project.categories().isEmpty())
            p
                | You don't have created any categories yet. Come on and create some
                a(href="/projects/#{project.id}/categories/create")  here.
        else
            h2 Logged Time:
            div#piechart
            script(type="text/javascript" src="https://www.gstatic.com/charts/loader.js")
            script(type="text/javascript").
                var transactions = [!{transactions}];

                // Load google charts
                google.charts.load('current', {'packages': ['corechart']});
                google.charts.setOnLoadCallback(drawChart);

                // Draw the chart and set the chart values
                function drawChart() {
                    var data = new google.visualization.DataTable();
                    data.addColumn('string', 'Category')
                    data.addColumn('number', 'Amount')
                    data.addRows(transactions)

                    var options = {'width': 400, 'height': 300};
                    var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                    chart.draw(data, options);
                }
    else
        h2 Owner:
            p #{project.owner.getFullName()}

    h2 Members:
    if project.members.length > 1
        ul
        each member in projects.members()
            li #{member.getFullName()}
    else
        p There are no members
